{"version":3,"sources":["../src/keyboard.js"],"names":["$","caretTo","el","index","createTextRange","range","move","select","selectionStart","focus","setSelectionRange","caretPos","document","setEndPoint","selection","createRange","e","text","length","fn","caret","offset","get","queue","next","isNaN","i","val","indexOf","caretToStart","caretToEnd","jQuery","KEYBOARD_TIMEOUT","emailRegex","Keyboard","options","keyboardId","id","keyboard","inputBoxNumber","inputBox","keyCase","backspaceTimeout","active","constraint","constraintButtons","setComplianceTimeout","prototype","init","callback","getElementById","self","addEventListener","target","hasClass","_toggleShift","_toggleSym","_backspace","_keyPress","_validateInput","find","_backspaceUp","reset","data","activate","deactivate","hide","show","is","ascii_code","attr","addClass","window","setTimeout","removeClass","character","String","fromCharCode","content","result","substring","clearTimeout","slice","setInputBox","newInputBoxNumber","getInputBox","setConstraint","constraintType","_validateSpaceSeparationThreeFields","_validateSpaceSeparation","_validateNoConstraint","_validateEmail","includes","forEach","buttonId","trim","test"],"mappings":"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","file":"keyboard.js","sourcesContent":["/* globals $ */\n\n// Set caret position easily in jQuery\n// Written by and Copyright of Luke Morton, 2011\n// Licensed under MIT\n(function ($) {\n  // Behind the scenes method deals with browser\n  // idiosyncrasies and such\n  $.caretTo = function (el, index) {\n    if (el.createTextRange) {\n      var range = el.createTextRange()\n      range.move('character', index)\n      range.select()\n    } else if (el.selectionStart !== null) {\n      el.focus()\n      el.setSelectionRange(index, index)\n    }\n  }\n\n  // Another behind the scenes that collects the\n  // current caret position for an element\n\n  // TODO: Get working with Opera\n  $.caretPos = function (el) {\n    if ('selection' in document) {\n      var range = el.createTextRange()\n      try {\n        range.setEndPoint('EndToStart', document.selection.createRange())\n      } catch (e) {\n        // Catch IE failure here, return 0 like\n        // other browsers\n        return 0\n      }\n      return range.text.length\n    } else if (el.selectionStart !== null) {\n      return el.selectionStart\n    }\n  }\n\n  // The following methods are queued under fx for more\n  // flexibility when combining with $.fn.delay() and\n  // jQuery effects.\n\n  // Set caret to a particular index\n  $.fn.caret = function (index, offset) {\n    if (typeof (index) === 'undefined') {\n      return $.caretPos(this.get(0))\n    }\n\n    return this.queue(function (next) {\n      if (isNaN(index)) {\n        var i = $(this).val().indexOf(index)\n\n        if (offset === true) {\n          i += index.length\n        } else if (typeof (offset) !== 'undefined') {\n          i += offset\n        }\n\n        $.caretTo(this, i)\n      } else {\n        $.caretTo(this, index)\n      }\n\n      next()\n    })\n  }\n\n  // Set caret to beginning of an element\n  $.fn.caretToStart = function () {\n    return this.caret(0)\n  }\n\n  // Set caret to the end of an element\n  $.fn.caretToEnd = function () {\n    return this.queue(function (next) {\n      $.caretTo(this, $(this).val().length)\n      next()\n    })\n  }\n}(jQuery))\n\nconst KEYBOARD_TIMEOUT = 30000\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\nvar Keyboard = function (options) {\n  this.keyboardId = options.id\n  this.keyboard = $('#' + options.id)\n  this.inputBoxNumber = options.inputBox\n  this.inputBox = $(`.text-input-field-${options.inputBox}`)\n  this.keyCase = options.keyCase || 'lc'\n  this.backspaceTimeout = options.backspaceTimeout || null\n  this.active = options.active || true\n  this.constraint = options.constraint || null\n  this.constraintButtons = []\n  this.setComplianceTimeout = options.setComplianceTimeout\n}\n\nKeyboard.prototype.init = function init (callback) {\n  this.callback = callback ? callback : null\n  var keyboard = document.getElementById(this.keyboardId)\n  var self = this\n  keyboard.addEventListener('mousedown', function (e) {\n    setComplianceTimeout()\n    if (!self.active) return\n    var target = $(e.target)\n    if (target.hasClass('shift')) {\n      self._toggleShift()\n    } else if (target.hasClass('sym')) {\n      self._toggleSym()\n    } else if (target.hasClass('backspace')) {\n      self._backspace(target)\n    } else if (target.hasClass('key')) {\n      self._keyPress(target)\n    }\n    self._validateInput()\n  })\n\n  if (this.keyboardId === 'wifi-keyboard') {\n    this.keyboard.find('.entry .backspace').get(0).addEventListener('mouseup', function (e) {\n      var target = $(e.target)\n      self._backspaceUp(target)\n    })\n  }\n  return this\n}\n\nKeyboard.prototype.reset = function reset () {\n  this.inputBox.data('content', '').val('')\n}\n\nKeyboard.prototype.activate = function activate () {\n  this.active = true\n  this.reset()\n}\n\nKeyboard.prototype.deactivate = function deactivate () {\n  this.active = false\n}\n\nKeyboard.prototype._toggleShift = function _toggleShift () {\n  if (this.keyCase === 'lc') {\n    this.keyCase = 'uc'\n    this.keyboard.find('.keyboard-lc').hide()\n    this.keyboard.find('.keyboard-uc').show()\n  } else {\n    this.keyCase = 'lc'\n    this.keyboard.find('.keyboard-uc').hide()\n    this.keyboard.find('.keyboard-lc').show()\n  }\n}\n\nKeyboard.prototype._toggleSym = function _toggleSym () {\n  if (this.keyboard.find('.keyboard-sym').is(':visible')) {\n    this.keyboard.find('.keyboard-sym').hide()\n    if (this.keyCase === 'lc') {\n      this.keyboard.find('.keyboard-lc').show()\n    } else {\n      this.keyboard.find('.keyboard-uc').show()\n    }\n  } else {\n    this.keyboard.find('.keyboard-lc').hide()\n    this.keyboard.find('.keyboard-uc').hide()\n    this.keyboard.find('.keyboard-sym').show()\n  }\n}\n\nKeyboard.prototype._keyPress = function _keyPress (target) {\n  var ascii_code = target.attr('data-ascii')\n  if (ascii_code) {\n    target.addClass('active')\n    window.setTimeout(function () { target.removeClass('active') }, 500)\n    var inputBox = this.inputBox\n    var character = String.fromCharCode(ascii_code)\n    // var displayCharacter = (ascii_code === 32) ? \"␣\" : character\n    var content = inputBox.data('content') + character\n    inputBox.data('content', content)\n    inputBox.val(content)\n    inputBox.caretToEnd()\n    if (this.keyCase === 'uc') {\n      this._toggleShift()\n    }\n  }\n}\n\nKeyboard.prototype._backspace = function _backspace (target) {\n  if (this.keyboardId !== 'wifi-keyboard') {\n    var inputBox = this.inputBox\n    var content = inputBox.data('content')\n    var result = content.substring(0, content.length - 1)\n    inputBox.data('content', result)\n    inputBox.val(result)\n    inputBox.caretToEnd()\n  } else {\n    target.addClass('active')\n    var inputBox = this.inputBox\n    window.clearTimeout(this.backspaceTimeout)\n    this.backspaceTimeout = window.setTimeout(function () {\n      inputBox.data('content', '')\n      inputBox.val('')\n      inputBox.caretToEnd()\n    }, 1000)\n  }\n}\n\nKeyboard.prototype._backspaceUp = function _backspaceUp (target) {\n  window.clearTimeout(this.backspaceTimeout)\n  if (!target) return\n  target.removeClass('active')\n\n  var inputBox = this.inputBox\n  var content = inputBox.data('content').slice(0, -1)\n  inputBox.data('content', content)\n\n  inputBox.val(content)\n  inputBox.caretToEnd()\n}\n\n// pass the class or id of the new input box to put text into, include the . or # as well\nKeyboard.prototype.setInputBox = function setInputBox(newInputBoxNumber, constraintButtons = []) {\n  this.inputBoxNumber = newInputBoxNumber\n  this.inputBox = $(`.text-input-field-${newInputBoxNumber}`)\n  if (!this.inputBox.data('content'))\n    this.inputBox.data('content', '').val('')\n  if (constraintButtons.length > 0) {\n    this.constraintButtons = constraintButtons\n  }\n  this._validateInput()\n}\n\nKeyboard.prototype.getInputBox = function getInputBox() {\n  return this.inputBoxNumber\n}\n\nKeyboard.prototype.setConstraint = function setConstraint(constraintType, constraintButtons = []) {\n  this.constraint = constraintType\n  this.constraintButtons = constraintButtons\n  this._validateInput()\n}\n\nKeyboard.prototype._validateInput = function _validateInput() {\n  switch(this.constraint) {\n    case \"spaceSeparationThreeFields\":\n      this._validateSpaceSeparationThreeFields()\n      break\n    case \"spaceSeparation\":\n      this._validateSpaceSeparation()\n      break\n    case \"none\":\n      this._validateNoConstraint()\n      break\n    case \"email\":\n      this._validateEmail()\n    default:\n      break\n  }\n}\n\nKeyboard.prototype._validateSpaceSeparationThreeFields =  function _validateSpaceSeparationThreeFields() {\n  if (this.inputBoxNumber != 3) {\n    this._validateSpaceSeparation()\n  } else {\n    if (!!this.inputBox.data('content') && !this.inputBox.data('content').includes(' ')) {\n      this.constraintButtons.forEach(buttonId => {\n        $(buttonId).show()\n      })\n      return\n    }\n  }\n}\n\nKeyboard.prototype._validateSpaceSeparation = function _validateSpaceSeparation() {\n  // no spaces allowed inside field\n  // minimum 1 character per field\n  if (!!this.inputBox.data('content') && !this.inputBox.data('content').includes(' ')) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n\nKeyboard.prototype._validateNoConstraint = function _validateSpaceSeparation() {\n  // minimum 1 non space character\n  if (!!this.inputBox.data('content') && !!this.inputBox.data('content').trim()) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n\nKeyboard.prototype._validateEmail = function _validateEmail() {\n  const content = this.inputBox.data('content') || ''\n  if (emailRegex.test(content)) {\n    this.constraintButtons.forEach(buttonId => {\n      $(buttonId).show()\n    })\n    return\n  }\n  this.constraintButtons.forEach(buttonId => {\n    $(buttonId).hide()\n  })\n}\n"]}